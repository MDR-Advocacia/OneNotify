2025-09-25 09:34:23,127 [INFO] - ============================================================
2025-09-25 09:34:23,127 [INFO] - INICIANDO NOVA EXECUÇÃO DA RPA
2025-09-25 09:34:23,127 [INFO] - ============================================================
2025-09-25 09:34:23,351 [INFO] - 
FASE 1: LOGIN E CONFIGURAÇÃO DA SESSÃO
2025-09-25 09:35:24,781 [INFO] - 
FASE 2: EXTRAÇÃO DE NOVAS NOTIFICAÇÕES E REGISTRO DE CIÊNCIA
2025-09-25 09:35:24,781 [INFO] - Iniciando módulo de extração e ciência...
2025-09-25 09:35:24,781 [INFO] - Navegando para a Central de Notificações...
2025-09-25 09:35:26,048 [INFO] - Acessando a 'Visão do Advogado'...
2025-09-25 09:35:26,756 [INFO] - --- Processando tarefa: Andamento de publicação em processo de condução terceirizada ---
2025-09-25 09:35:26,765 [WARNING] - Tarefa 'Andamento de publicação em processo de condução terceirizada' não encontrada. Pulando.
2025-09-25 09:35:26,765 [INFO] - --- Processando tarefa: Doc. anexado por empresa externa em processo terceirizado ---
2025-09-25 09:35:26,768 [INFO] - 20 itens encontrados. Abrindo detalhes...
2025-09-25 09:35:27,626 [INFO] -     - Verificando página 1...
2025-09-25 09:35:30,566 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:35:35,870 [WARNING] -     - Modal de carregamento não apareceu, seguindo em frente.
2025-09-25 09:35:35,878 [INFO] -     - Verificando página 2...
2025-09-25 09:35:38,713 [INFO] -     - Fim da paginação.
2025-09-25 09:35:38,713 [INFO] -     - Confirmando a ciência...
2025-09-25 09:35:44,544 [ERROR] - Falha crítica ao processar a tarefa 'Doc. anexado por empresa externa em processo terceirizado': Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") to be visible
    11 × locator resolved to hidden <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div>
Traceback (most recent call last):
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/modulo_notificacoes.py", line 101, in extrair_dados_e_dar_ciencia_em_lote
    modal_carregando.wait_for(state='visible', timeout=5000)
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/sync_api/_generated.py", line 17975, in wait_for
    self._sync(self._impl_obj.wait_for(timeout=timeout, state=state))
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_locator.py", line 692, in wait_for
    await self._frame.wait_for_selector(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_frame.py", line 369, in wait_for_selector
    await self._channel.send(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 69, in send
    return await self._connection.wrap_api_call(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 558, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") to be visible
    11 × locator resolved to hidden <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div>

2025-09-25 09:35:44,548 [INFO] - Tarefa 'Doc. anexado por empresa externa em processo terceirizado' finalizada. 7 novas notificações salvas. 18 ciências registradas.
2025-09-25 09:35:44,548 [INFO] - --- Processando tarefa: Inclusão de Documentos no NPJ ---
2025-09-25 09:35:44,560 [INFO] - 170 itens encontrados. Abrindo detalhes...
2025-09-25 09:35:45,938 [INFO] -     - Verificando página 1...
2025-09-25 09:35:48,748 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:35:49,071 [ERROR] - Falha crítica ao processar a tarefa 'Inclusão de Documentos no NPJ': Locator.wait_for: Error: strict mode violation: locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") resolved to 2 elements:
    1) <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div> aka locator("[id=\"notificacoesNaoLidasForm:ajaxLoadingModalBox\"]").first
    2) <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div> aka locator("[id=\"notificacoesNaoLidasForm:ajaxLoadingModalBox\"]").nth(1)

Call log:
  - waiting for locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") to be visible
Traceback (most recent call last):
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/modulo_notificacoes.py", line 86, in extrair_dados_e_dar_ciencia_em_lote
    modal_carregando.wait_for(state='visible', timeout=5000)
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/sync_api/_generated.py", line 17975, in wait_for
    self._sync(self._impl_obj.wait_for(timeout=timeout, state=state))
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_locator.py", line 692, in wait_for
    await self._frame.wait_for_selector(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_frame.py", line 369, in wait_for_selector
    await self._channel.send(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 69, in send
    return await self._connection.wrap_api_call(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 558, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.Error: Locator.wait_for: Error: strict mode violation: locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") resolved to 2 elements:
    1) <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div> aka locator("[id=\"notificacoesNaoLidasForm:ajaxLoadingModalBox\"]").first
    2) <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div> aka locator("[id=\"notificacoesNaoLidasForm:ajaxLoadingModalBox\"]").nth(1)

Call log:
  - waiting for locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") to be visible

2025-09-25 09:35:49,072 [INFO] - Tarefa 'Inclusão de Documentos no NPJ' finalizada. 10 novas notificações salvas. 10 ciências registradas.
2025-09-25 09:35:49,072 [INFO] - Extração/ciência concluídas. Salvas: 17, Ciências: 28.
2025-09-25 09:35:49,072 [INFO] - 
FASE 3: PROCESSAMENTO DETALHADO EM LOTES
2025-09-25 09:35:49,072 [INFO] - Nenhum NPJ pendente para detalhamento.
2025-09-25 09:35:49,073 [INFO] - Finalizando a automação e fechando o navegador.
2025-09-25 09:35:49,082 [INFO] - 
--- RESUMO DA EXECUÇÃO ---
2025-09-25 09:35:49,082 [INFO] - Timestamp: 2025-09-25 09:35:49
2025-09-25 09:35:49,082 [INFO] - Duracao Total: 85.95
2025-09-25 09:35:49,082 [INFO] - Tempo Medio Npj: 0
2025-09-25 09:35:49,082 [INFO] - Notificacoes Salvas: 17
2025-09-25 09:35:49,082 [INFO] - Ciencias Registradas: 28
2025-09-25 09:35:49,082 [INFO] - Andamentos: 0
2025-09-25 09:35:49,082 [INFO] - Documentos: 0
2025-09-25 09:35:49,082 [INFO] - Sucesso: 0
2025-09-25 09:35:49,082 [INFO] - Falha: 0
2025-09-25 09:35:49,082 [INFO] - ============================================================
2025-09-25 09:35:49,082 [INFO] - Execução finalizada. Log completo em: logs/log_2025-09-25_09-34-23.txt
