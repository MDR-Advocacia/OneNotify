2025-09-25 09:16:16,239 [INFO] - ============================================================
2025-09-25 09:16:16,239 [INFO] - INICIANDO NOVA EXECUÇÃO DA RPA
2025-09-25 09:16:16,239 [INFO] - ============================================================
2025-09-25 09:16:16,243 [INFO] - 50 notificações com erro ou travadas foram resetadas para 'Pendente'.
2025-09-25 09:16:16,458 [INFO] - 
FASE 1: LOGIN E CONFIGURAÇÃO DA SESSÃO
2025-09-25 09:16:31,056 [INFO] - 
FASE 2: EXTRAÇÃO DE NOVAS NOTIFICAÇÕES E REGISTRO DE CIÊNCIA
2025-09-25 09:16:31,057 [INFO] - Iniciando módulo de extração e ciência...
2025-09-25 09:16:31,057 [INFO] - Navegando para a Central de Notificações...
2025-09-25 09:16:32,350 [INFO] - Acessando a 'Visão do Advogado'...
2025-09-25 09:16:33,042 [INFO] - --- Processando tarefa: Andamento de publicação em processo de condução terceirizada ---
2025-09-25 09:16:33,053 [WARNING] - Tarefa 'Andamento de publicação em processo de condução terceirizada' não encontrada na lista principal. Pulando.
2025-09-25 09:16:33,053 [INFO] - --- Processando tarefa: Doc. anexado por empresa externa em processo terceirizado ---
2025-09-25 09:16:33,056 [INFO] - 50 itens encontrados. Abrindo detalhes...
2025-09-25 09:16:33,905 [INFO] -     - Verificando página 1...
2025-09-25 09:16:36,631 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:36,937 [INFO] -     - Verificando página 2...
2025-09-25 09:16:37,009 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:37,150 [INFO] -     - Verificando página 3...
2025-09-25 09:16:40,349 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:40,633 [INFO] -     - Verificando página 4...
2025-09-25 09:16:40,704 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:40,852 [INFO] -     - Verificando página 5...
2025-09-25 09:16:44,014 [INFO] -     - Confirmando a ciência...
2025-09-25 09:16:50,040 [ERROR] - Falha crítica ao processar a tarefa 'Doc. anexado por empresa externa em processo terceirizado': Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") to be visible
    11 × locator resolved to hidden <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div>
Traceback (most recent call last):
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/modulo_notificacoes.py", line 81, in extrair_dados_e_dar_ciencia_em_lote
    modal_carregando.wait_for(state='visible', timeout=5000)
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/sync_api/_generated.py", line 17975, in wait_for
    self._sync(self._impl_obj.wait_for(timeout=timeout, state=state))
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_locator.py", line 692, in wait_for
    await self._frame.wait_for_selector(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_frame.py", line 369, in wait_for_selector
    await self._channel.send(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 69, in send
    return await self._connection.wrap_api_call(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 558, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TimeoutError: Locator.wait_for: Timeout 5000ms exceeded.
Call log:
  - waiting for locator("#notificacoesNaoLidasForm\\:ajaxLoadingModalBox") to be visible
    11 × locator resolved to hidden <div id="notificacoesNaoLidasForm:ajaxLoadingModalBox">…</div>

2025-09-25 09:16:50,042 [INFO] - Tarefa 'Doc. anexado por empresa externa em processo terceirizado' finalizada. 20 novas notificações salvas. 25 ciências registradas.
2025-09-25 09:16:50,042 [INFO] - --- Processando tarefa: Inclusão de Documentos no NPJ ---
2025-09-25 09:16:50,048 [INFO] - 170 itens encontrados. Abrindo detalhes...
2025-09-25 09:16:50,095 [INFO] -     - Verificando página 1...
2025-09-25 09:16:54,684 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:54,988 [INFO] -     - Verificando página 2...
2025-09-25 09:16:55,076 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:55,378 [INFO] -     - Verificando página 3...
2025-09-25 09:16:58,708 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:59,004 [INFO] -     - Verificando página 4...
2025-09-25 09:16:59,083 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:16:59,215 [INFO] -     - Verificando página 5...
2025-09-25 09:17:02,531 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:02,812 [INFO] -     - Verificando página 6...
2025-09-25 09:17:02,890 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:03,050 [INFO] -     - Verificando página 7...
2025-09-25 09:17:06,140 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:06,443 [INFO] -     - Verificando página 8...
2025-09-25 09:17:06,518 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:06,819 [INFO] -     - Verificando página 9...
2025-09-25 09:17:09,954 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:10,366 [INFO] -     - Verificando página 10...
2025-09-25 09:17:10,451 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:10,600 [INFO] -     - Verificando página 11...
2025-09-25 09:17:13,798 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:14,080 [INFO] -     - Verificando página 12...
2025-09-25 09:17:14,153 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:14,411 [INFO] -     - Verificando página 13...
2025-09-25 09:17:17,442 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:17,754 [INFO] -     - Verificando página 14...
2025-09-25 09:17:17,830 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:18,109 [INFO] -     - Verificando página 15...
2025-09-25 09:17:21,132 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:21,438 [INFO] -     - Verificando página 16...
2025-09-25 09:17:21,509 [INFO] -     - Navegando para a próxima página de detalhes...
2025-09-25 09:17:51,512 [ERROR] - Falha crítica ao processar a tarefa 'Inclusão de Documentos no NPJ': Locator.click: Timeout 30000ms exceeded.
Call log:
  - waiting for locator("[id*=\":dataTabletableNotificacoesNaoLidas\"]").locator("tfoot").locator("td.rich-datascr-button:not(.dsbld)[onclick*=\"page': 'next'\"]")
    - locator resolved to <td class=" rich-datascr-button" onclick="Event.fire(this, 'rich:datascroller:onscroll', {'page': 'next'});"></td>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div class="rich-mpnl-mask-div-opaque rich-mpnl-mask-div" id="notificacoesNaoLidasForm:ajaxLoadingModalBoxDiv">…</div> from <div class="rich-modalpanel " id="notificacoesNaoLidasForm:ajaxLoadingModalBoxContainer">…</div> subtree intercepts pointer events
    - retrying click action
    - waiting 20ms
    - waiting for element to be visible, enabled and stable
    - element is not stable
  - retrying click action
    - waiting 100ms
    - waiting for element to be visible, enabled and stable
  - element was detached from the DOM, retrying
Traceback (most recent call last):
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/modulo_notificacoes.py", line 71, in extrair_dados_e_dar_ciencia_em_lote
    botao_proxima.click()
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/sync_api/_generated.py", line 15543, in click
    self._sync(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_sync_base.py", line 115, in _sync
    return task.result()
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_locator.py", line 160, in click
    return await self._frame.click(self._selector, strict=True, **params)
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_frame.py", line 549, in click
    await self._channel.send("click", self._timeout, locals_to_params(locals()))
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 69, in send
    return await self._connection.wrap_api_call(
  File "/Users/rildonpimentelpereira/GitHub/OneNotify/venv/lib/python3.9/site-packages/playwright/_impl/_connection.py", line 558, in wrap_api_call
    raise rewrite_error(error, f"{parsed_st['apiName']}: {error}") from None
playwright._impl._errors.TimeoutError: Locator.click: Timeout 30000ms exceeded.
Call log:
  - waiting for locator("[id*=\":dataTabletableNotificacoesNaoLidas\"]").locator("tfoot").locator("td.rich-datascr-button:not(.dsbld)[onclick*=\"page': 'next'\"]")
    - locator resolved to <td class=" rich-datascr-button" onclick="Event.fire(this, 'rich:datascroller:onscroll', {'page': 'next'});"></td>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div class="rich-mpnl-mask-div-opaque rich-mpnl-mask-div" id="notificacoesNaoLidasForm:ajaxLoadingModalBoxDiv">…</div> from <div class="rich-modalpanel " id="notificacoesNaoLidasForm:ajaxLoadingModalBoxContainer">…</div> subtree intercepts pointer events
    - retrying click action
    - waiting 20ms
    - waiting for element to be visible, enabled and stable
    - element is not stable
  - retrying click action
    - waiting 100ms
    - waiting for element to be visible, enabled and stable
  - element was detached from the DOM, retrying

2025-09-25 09:17:51,519 [INFO] - Tarefa 'Inclusão de Documentos no NPJ' finalizada. 88 novas notificações salvas. 76 ciências registradas.
2025-09-25 09:17:51,519 [INFO] - Extração/ciência concluídas. Salvas: 108, Ciências: 101.
2025-09-25 09:17:51,519 [INFO] - 
FASE 3: PROCESSAMENTO DETALHADO EM LOTES
2025-09-25 09:17:51,520 [INFO] - Total de 186 NPJs pendentes para detalhamento.
2025-09-25 09:17:51,521 [INFO] - Não foi possível obter um lote para processamento no momento.
2025-09-25 09:17:51,521 [INFO] - Finalizando a automação e fechando o navegador.
2025-09-25 09:17:51,549 [INFO] - 
--- RESUMO DA EXECUÇÃO ---
2025-09-25 09:17:51,549 [INFO] - Timestamp: 2025-09-25 09:17:51
2025-09-25 09:17:51,549 [INFO] - Duracao Total: 95.3
2025-09-25 09:17:51,549 [INFO] - Tempo Medio Npj: 0
2025-09-25 09:17:51,549 [INFO] - Notificacoes Salvas: 108
2025-09-25 09:17:51,549 [INFO] - Ciencias Registradas: 101
2025-09-25 09:17:51,549 [INFO] - Andamentos: 0
2025-09-25 09:17:51,549 [INFO] - Documentos: 0
2025-09-25 09:17:51,549 [INFO] - Sucesso: 0
2025-09-25 09:17:51,550 [INFO] - Falha: 0
2025-09-25 09:17:51,550 [INFO] - ============================================================
2025-09-25 09:17:51,550 [INFO] - Execução finalizada. Log completo em: logs/log_2025-09-25_09-16-16.txt
